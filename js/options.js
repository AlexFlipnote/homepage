(()=>{var $=Object.defineProperty;var B=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;var w=(e,t,n)=>t in e?$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_=(e,t)=>{for(var n in t||(t={}))P.call(t,n)&&w(e,n,t[n]);if(B)for(var n of B(t))D.call(t,n)&&w(e,n,t[n]);return e};var O=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),S=typeof InstallTrigger!="undefined",j=/^(?:chrome|moz)-extension:$/.test(location.protocol);var C={sq:"Albanian",af:"Afrikaans",ar:"Arabic",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bg:"Bulgarian",ca:"Catalan",zh_cn:"Chinese Simplified",zh_tw:"Chinese Traditional",hr:"Croatian",cz:"Czech",da:"Danish",nl:"Dutch",en:"English",fi:"Finnish",fr:"French",gl:"Galician",de:"German",el:"Greek",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",it:"Italian",ja:"Japanese",kr:"Korean",ku:"Kurmanji (Kurdish)",la:"Latvian",lt:"Lithuanian",mk:"Macedonian",no:"Norwegian",fa:"Persian (Farsi)",pl:"Polish",pt:"Portuguese",pt_br:"Portugu\xEAs Brasil",ro:"Romanian",ru:"Russian",sr:"Serbian",sk:"Slovak",sl:"Slovenian",es:"Spanish",se:"Swedish",th:"Thai",tr:"Turkish",ua:"Ukrainian",vi:"Vietnamese",zu:"Zulu"};var x={"en-US":"English (United States)","en-GB":"English (United Kingdom)","en-CA":"English (Canada)","en-AU":"English (Australia)","en-IN":"English (India)","no-NO":"Norwegian (Norway)","sv-SE":"Swedish (Sweden)","da-DK":"Danish (Denmark)","fi-FI":"Finnish (Finland)","is-IS":"Icelandic (Iceland)","de-DE":"German (Germany)","nl-NL":"Dutch (Netherlands)","fr-FR":"French (France)","es-ES":"Spanish (Spain)","it-IT":"Italian (Italy)","pt-PT":"Portuguese (Portugal)","pt-BR":"Portuguese (Brazil)","pl-PL":"Polish (Poland)","cs-CZ":"Czech (Czech Republic)","sk-SK":"Slovak (Slovakia)","hu-HU":"Hungarian (Hungary)","ru-RU":"Russian (Russia)","uk-UA":"Ukrainian (Ukraine)","ja-JP":"Japanese (Japan)","zh-CN":"Chinese (Simplified, China)","zh-TW":"Chinese (Traditional, Taiwan)","ko-KR":"Korean (South Korea)","th-TH":"Thai (Thailand)","hi-IN":"Hindi (India)","bn-BD":"Bengali (Bangladesh)","ar-SA":"Arabic (Saudi Arabia)","he-IL":"Hebrew (Israel)","tr-TR":"Turkish (Turkey)","fa-IR":"Persian (Iran)","af-ZA":"Afrikaans (South Africa)","sw-KE":"Swahili (Kenya)","es-MX":"Spanish (Mexico)","es-AR":"Spanish (Argentina)","fr-CA":"French (Canada)","en-NZ":"English (New Zealand)","el-GR":"Greek (Greece)","ro-RO":"Romanian (Romania)","id-ID":"Indonesian (Indonesia)","ms-MY":"Malay (Malaysia)","vi-VN":"Vietnamese (Vietnam)","ta-IN":"Tamil (India)"};var A={language:"",wlanguage:"",searchbar:!1,custombg:[],fmt_time:"",fmt_date:"",customfont:"",customfontgoogle:!1,bookmarks:[],bookmarksFavicon:!1,bookmarksTopSitesEnabled:!1,bookmarksTopSitesAmount:5,wkey:"",temp_type:"celcius",hexbg:!1,showSettings:!0,customcss:""};var T="2.2.11";var L=document.getElementById("version");L&&(L.textContent=T);function s(e,t=""){let n=document.getElementById("language").value,a=document.getElementById("wlanguage").value,o=document.getElementById("customfont").value,c=document.getElementById("fmt_time").value,m=document.getElementById("fmt_date").value,i=document.getElementById("customfontgoogle").checked,r=document.getElementById("hexbg").checked,h=document.getElementById("wkey").value,p=document.getElementById("temp_type").value,d=document.getElementById("show-settings").checked,v=document.getElementById("customcss").value,l=document.getElementById("bookmarksTopSitesEnabled").checked,k=parseInt(document.getElementById("bookmarksTopSitesAmount").value)||5,g=document.getElementById("bookmarksFavicon").checked,E=document.getElementById("searchbar").checked,u=[],b=document.getElementsByClassName("preview-image"),y=K();for(var I=0;I<b.length;I++)u.push(b[I].src);chrome.storage.local.set({language:n,wlanguage:a,custombg:u,fmt_time:c,searchbar:E,fmt_date:m,customfont:o,customfontgoogle:i,wkey:h,hexbg:r,temp_type:p,showSettings:d,bookmarksFavicon:g,bookmarksTopSitesEnabled:l,bookmarksTopSitesAmount:k,customcss:v,bookmarks:y},()=>{let N=document.getElementById("notification"),f=document.createElement("div");f.classList.add("alert"),t&&f.classList.add(t),f.textContent=e||"Options saved",N.appendChild(f),setTimeout(()=>{f.remove()},3e3)})}function G(){chrome.storage.local.get(_({},A),e=>{let t=document.getElementById("language");t.value=e.language,t.onchange=()=>{s(`Language changed: ${t.value||"default"}`,"change")};let n=document.getElementById("searchbar");n.checked=e.searchbar,n.onchange=()=>{s(`Search bar set: ${n.checked}`,n.checked?"add":"remove")};let a=document.getElementById("wlanguage");a.value=e.wlanguage,a.onchange=()=>{s(`Weather language set: ${a.value||"default"}`,a.value?"change":"remove")};let o=document.getElementById("fmt_time");o.value=e.fmt_time,o.onchange=()=>{s(`Time format set: ${o.value||"default"}`,o.value?"change":"remove")};let c=document.getElementById("fmt_date");c.value=e.fmt_date,c.onchange=()=>{s(`Date format set: ${c.value||"default"}`,c.value?"change":"remove")};let m=document.getElementById("customfont");m.value=e.customfont,m.onchange=()=>{s(`Custom font set: ${m.value||"default"}`,m.value?"change":"remove")};let i=document.getElementById("customfontgoogle");i.checked=e.customfontgoogle,i.onchange=()=>{s(`Google font set: ${i.checked}`,i.checked?"add":"remove")};let r=document.getElementById("hexbg");r.checked=e.hexbg,r.onchange=()=>{s(`HEX background set: ${r.checked}`,r.checked?"add":"remove")};let h=document.getElementById("wkey");h.value=e.wkey,h.onchange=()=>{s("Saved OpenWeatherMap API key",h.value.length?"add":"remove")};let p=document.getElementById("temp_type");p.value=e.temp_type,p.onchange=()=>{s(`Weather temperature type changed: ${p.value}`,"change")};let d=document.getElementById("show-settings");d.checked=e.showSettings,d.onchange=()=>{s(`Show settings button set: ${d.checked}`,d.checked?"add":"remove")};let v=document.getElementById("customcss");v.value=e.customcss,v.onchange=()=>{s("Custom CSS changed")};let l=document.getElementById("bookmarksTopSitesEnabled");l.checked=e.bookmarksTopSitesEnabled,l.onchange=()=>{s(`Bookmarks top sites set: ${l.checked}`,l.checked?"add":"remove")};let k=document.getElementById("bookmarksTopSitesAmount");k.value=e.bookmarksTopSitesAmount,k.onchange=()=>{s(`Bookmarks top sites amount set: ${k.value}`,"change")};let g=document.getElementById("bookmarksFavicon");g.checked=e.bookmarksFavicon,g.onchange=()=>{s(`Bookmarks favicon set: ${g.checked}`,g.checked?"add":"remove")},S&&(document.getElementById("bmFavFirefox").style.display="none"),e.bookmarks.forEach(({name:b,url:y})=>{R(b,y)});let E=document.getElementById("custombg_previews");for(var u=0;u<e.custombg.length;u++)F(e.custombg[u],E)})}document.addEventListener("DOMContentLoaded",()=>{let e=document.getElementById("language");for(let[n,a]of Object.entries(x)){let o=document.createElement("option");o.text=a,o.value=n,e.appendChild(o)}let t=document.getElementById("wlanguage");for(let[n,a]of Object.entries(C)){let o=document.createElement("option");o.text=a,o.value=n,t.appendChild(o)}});document.getElementById("custombg_uploader").onchange=()=>{let e=document.getElementById("custombg_previews"),t=document.getElementById("custombg_uploader").files;if(t.length)for(let n=0;n<t.length;n++){let a=t[n],o=new FileReader;o.addEventListener("load",function(){F(o.result,e),s(`Added background ${n+1}/${t.length}`,"add")},!1),o.readAsDataURL(a)}};document.getElementById("add_bookmark").onclick=()=>{R(document.getElementById("bookmark_name").value||"New Bookmark",document.getElementById("bookmark_url").value||"#"),document.getElementById("bookmark_name").value="",document.getElementById("bookmark_url").value="",s("Added new bookmark")};document.body.onclick=function(e){e.target.getAttribute("class")=="preview-image"&&(e.target.remove(),s("Removed background image","remove"))};function H(){let t=document.getElementById("custombg_previews").getElementsByClassName("preview-container");if(t.length!=0){for(;t.length>0;)t[0].remove();s("Deleted all background images","remove")}}function F(e,t){let n=document.createElement("div");n.classList.add("preview-container");let a=document.createElement("img");a.classList.add("preview-image"),a.src=e,n.append(a),t.querySelector(".file-container").before(n)}function R(e,t){let n=document.getElementById("blist"),a=document.createElement("div");a.classList.add("bookmark-item");let o=document.createElement("input"),c=document.createElement("input"),m=document.createElement("button");o.type="text",o.value=e,o.classList.add("bookmark-name"),c.type="text",c.value=t,c.classList.add("bookmark-url"),m.textContent="Remove",m.onclick=function(){a.remove(),s("Removed bookmark","remove")},a.appendChild(o),a.appendChild(c),a.appendChild(m),o.onchange=()=>{s("Changed bookmark name","change")},c.onchange=()=>{s("Changed bookmark URL","change")},n.appendChild(a)}function K(){let t=document.getElementById("blist").getElementsByClassName("bookmark-item"),n=[];for(var a=0;a<t.length;a++){let o=t[a],c=o.getElementsByClassName("bookmark-name")[0].value,m=o.getElementsByClassName("bookmark-url")[0].value||"#";n.push({name:c,url:m})}return n}document.addEventListener("DOMContentLoaded",G);document.getElementById("custombg_prune").addEventListener("click",H);})();
