(()=>{var R=Object.defineProperty;var S=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var B=(t,n,r)=>n in t?R(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,F=(t,n)=>{for(var r in n||(n={}))z.call(n,r)&&B(t,r,n[r]);if(S)for(var r of S(n))U.call(n,r)&&B(t,r,n[r]);return t};var v=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),E=typeof InstallTrigger!="undefined",T=/^(?:chrome|moz)-extension:$/.test(location.protocol);var C={"01d":"2600.png","02d":"26c5.png","03d":"2601.png","04d":"1f327.png","09d":"1f327.png","10d":"1f326.png","11d":"26c8.png","13d":"1f328.png","50d":"1f32b.png","01n":"1f311.png","02n":"26c5.png","03n":"2601.png","04n":"1f327.png","09n":"1f327.png","10n":"1f326.png","11n":"26c8.png","13n":"1f328.png","50n":"1f32b.png"},_={"en-US":"English (United States)","en-GB":"English (United Kingdom)","en-CA":"English (Canada)","en-AU":"English (Australia)","en-IN":"English (India)","no-NO":"Norwegian (Norway)","sv-SE":"Swedish (Sweden)","da-DK":"Danish (Denmark)","fi-FI":"Finnish (Finland)","is-IS":"Icelandic (Iceland)","de-DE":"German (Germany)","nl-NL":"Dutch (Netherlands)","fr-FR":"French (France)","es-ES":"Spanish (Spain)","it-IT":"Italian (Italy)","pt-PT":"Portuguese (Portugal)","pt-BR":"Portuguese (Brazil)","pl-PL":"Polish (Poland)","cs-CZ":"Czech (Czech Republic)","sk-SK":"Slovak (Slovakia)","hu-HU":"Hungarian (Hungary)","ru-RU":"Russian (Russia)","uk-UA":"Ukrainian (Ukraine)","ja-JP":"Japanese (Japan)","zh-CN":"Chinese (Simplified, China)","zh-TW":"Chinese (Traditional, Taiwan)","ko-KR":"Korean (South Korea)","th-TH":"Thai (Thailand)","hi-IN":"Hindi (India)","bn-BD":"Bengali (Bangladesh)","ar-SA":"Arabic (Saudi Arabia)","he-IL":"Hebrew (Israel)","tr-TR":"Turkish (Turkey)","fa-IR":"Persian (Iran)","af-ZA":"Afrikaans (South Africa)","sw-KE":"Swahili (Kenya)","es-MX":"Spanish (Mexico)","es-AR":"Spanish (Argentina)","fr-CA":"French (Canada)","en-NZ":"English (New Zealand)","el-GR":"Greek (Greece)","ro-RO":"Romanian (Romania)","id-ID":"Indonesian (Indonesia)","ms-MY":"Malay (Malaysia)","vi-VN":"Vietnamese (Vietnam)","ta-IN":"Tamil (India)"};var A={language:"",wlanguage:"",searchbar:!1,custombg:[],show_time:!0,show_date:!0,fmt_time:"",fmt_date:"",customfont:"",customfontgoogle:!1,bookmarks:[],bookmarksFavicon:!1,bookmarksTopSitesEnabled:!1,bookmarksTopSitesAmount:5,wkey:"",temp_type:"celcius",hexbg:!1,showSettings:!0,customcss:""};var M=function(t,n){if(!window.XMLHttpRequest)return console.log("This browser does not support requests");let r=new XMLHttpRequest;r.open("GET",t,!0),r.onload=function(){if(this.status>=200&&this.status<400){let d=JSON.parse(this.response);n&&typeof n=="function"&&n(d)}},r.send(null)};function D(t,n,r,d){let m=n.coords,i=d||"en",o=document.getElementById("wtemp");M(`https://api.openweathermap.org/data/2.5/weather?lat=${m.latitude}&lon=${m.longitude}&appid=${r}&lang=${i}`,s=>{document.getElementById("wicon").src=`images/weather/${C[s.weather[0].icon]}`,document.getElementById("wname").innerText=s.name,document.getElementById("wdescription").innerText=s.weather[0].description.replace(/^\w/,l=>l.toUpperCase()),t.temp_type==="fahrenheit"?o.innerText=`${Math.round(parseInt(s.main.temp)*(9/5)-459.67)} \xB0F`:o.innerText=`${Math.round(parseInt(s.main.temp)-273.15)} \xB0C`,document.getElementById("weather-container").style.display="flex"})}var $=navigator.language||"en-US";function G(t){let n=a=>a<10?"0"+a:""+a,r=a=>a<10?"00"+a:a<100?"0"+a:""+a,d=a=>a<10?" "+a:""+a,m={monthLong:new Map,monthShort:new Map,weekdayLong:new Map,weekdayShort:new Map,dayPeriod:new Map};function i(a,g){let e=g.length==="short"?m.monthShort:m.monthLong;e.has(a)||e.set(a,new Intl.DateTimeFormat(a,{month:g.length}));let c=e.get(a);return u=>c.format(new Date(2e3,u,1))}function o(a,g){let e=g.length==="short"?m.weekdayShort:m.weekdayLong;e.has(a)||e.set(a,new Intl.DateTimeFormat(a,{weekday:g.length}));let c=e.get(a);return u=>c.format(new Date(2020,0,5+u))}function s(a){if(!m.dayPeriod.has(a)){let e=new Intl.DateTimeFormat(a,{hour:"numeric",hour12:!0});m.dayPeriod.set(a,e)}let g=m.dayPeriod.get(a);return e=>{let u=g.formatToParts(new Date(2020,0,1,e)).find(p=>p.type==="dayPeriod");return u?u.value:e<12?"AM":"PM"}}function l(a,g){switch(a){case"%Y":return e=>String(e.getFullYear());case"%y":return e=>n(e.getFullYear()%100);case"%m":return e=>n(e.getMonth()+1);case"%B":{let e=i(g||void 0,{length:"long"});return c=>e(c.getMonth())}case"%b":{let e=i(g||void 0,{length:"short"});return c=>e(c.getMonth())}case"%d":return e=>n(e.getDate());case"%e":return e=>d(e.getDate());case"%j":return e=>{let c=new Date(e.getFullYear(),0,1),u=e-c;return r(Math.floor(u/864e5)+1)};case"%A":{let e=o(g||void 0,{length:"long"});return c=>e(c.getDay())}case"%a":{let e=o(g||void 0,{length:"short"});return c=>e(c.getDay())}case"%w":return e=>String(e.getDay());case"%H":return e=>n(e.getHours());case"%I":return e=>{let c=e.getHours()%12;return n(c===0?12:c)};case"%p":{let e=s(g||void 0);return c=>e(c.getHours())}case"%M":return e=>n(e.getMinutes());case"%S":return e=>n(e.getSeconds());case"%f":return e=>String(e.getMilliseconds()).padStart(3,"0");case"%z":return e=>{let c=-e.getTimezoneOffset(),u=c>=0?"+":"-",p=Math.abs(c),H=n(Math.floor(p/60)),N=n(p%60);return u+H+N};case"%Z":return e=>{try{let u=new Intl.DateTimeFormat(g||void 0,{timeZoneName:"short"}).formatToParts(e).find(p=>p.type==="timeZoneName");return u?u.value:l("%z")(e)}catch(c){return l("%z")(e)}};case"%F":return e=>`${l("%Y")(e)}-${l("%m")(e)}-${l("%d")(e)}`;case"%T":return e=>`${l("%H")(e)}:${l("%M")(e)}:${l("%S")(e)}`;case"%%":return()=>"%";default:return()=>a}}let k=[],L=/%[A-Za-z%]/g,b=0,I;for(;(I=L.exec(t))!==null;){let a=I.index;a>b&&k.push(t.slice(b,a));let g=I[0];k.push(l(g,$)),b=a+g.length}return b<t.length&&k.push(t.slice(b)),function(g=new Date){g instanceof Date||(g=new Date(g));let e=[];for(let c=0;c<k.length;c++){let u=k[c];typeof u=="string"?e.push(u):e.push(u(g))}return e.join("")}}function x(t){$=t||navigator.language||"en-US"}var f=class{constructor(n,r){this.el=typeof n=="string"?document.getElementById(n):n,this.format=r,this.animationFrameId=null}changeFormat(n){this.format=n}getTime(){return G(this.format)(new Date)}start(){this.el.textContent=this.getTime(),this.animationFrameId=requestAnimationFrame(()=>this.start())}stop(){cancelAnimationFrame(this.animationFrameId)}},y=class{constructor(n,{background:r=!1,color:d=!1,text:m=!1}={}){this.el=typeof n=="string"?document.getElementById(n):n,this.background=r,this.color=d,this.text=m,this.animationFrameId=null}_timeInHex(){function n(o){return("0"+o).slice(-2)}let r=new Date,d=n(r.getHours()),m=n(r.getMinutes()),i=n(r.getSeconds());return`${d}${m}${i}`}start(){this.background&&(this.el.style.backgroundColor=`#${this._timeInHex()}`),this.color&&(this.el.style.color=`#${this._timeInHex()}`),this.text&&(this.el.textContent=`#${this._timeInHex()}`),this.animationFrameId=requestAnimationFrame(()=>this.start())}stop(){cancelAnimationFrame(this.animationFrameId)}};var P="2.3.0";var h={fmt_time:"%H:%M:%S",fmt_date:"%e. %B %Y",backgroundImagesCount:31};function Z(t){return chrome.runtime.getURL(`/_favicon/?pageUrl=${t}&size=32`)}function w(t,n,r,{bookmarksFavicon:d=!1,isAuto:m=!1,localFavicon:i=""}={}){let o=document.createElement("a");if(o.href=r,m&&o.setAttribute("data-auto","true"),!E&&d){let l=document.createElement("img");l.src=Z(r),l.className="bookmark-icon",o.appendChild(l)}if(i.length>0){let l=document.createElement("img");l.src=i,l.className="bookmark-icon",o.appendChild(l)}let s=document.createElement("span");s.textContent=n,o.appendChild(s),t.appendChild(o)}if(T)console.log(`\u2611\uFE0F Running in extension mode (v${P})`),document.getElementById("search-form").onsubmit=t=>{t.preventDefault(),chrome.search.query({text:document.getElementById("search-input").value})},chrome.storage.local.get(F({},A),function(t){t.show_time&&new f("time",t.fmt_time||h.fmt_time).start(),t.show_date&&new f("date",t.fmt_date||h.fmt_date).start(),x(t.language);let n=document.getElementById("background"),d=`images/backgrounds/background${Math.floor(Math.random()*h.backgroundImagesCount)}.jpg`;t.custombg.length>0&&(d=t.custombg[Math.floor(Math.random()*t.custombg.length)]),n.onload=()=>{n.style.opacity=1},t.wkey&&navigator.geolocation.getCurrentPosition(function(i){D(t,i,t.wkey,t.wlanguage)});let m=document.getElementById("bookmarks");if(t.bookmarks&&(m.style.display="flex",t.bookmarks.forEach(({name:i,url:o})=>{w(m,i,o,{bookmarksFavicon:t.bookmarksFavicon})})),t.searchbar){let i=document.getElementById("search-form");i.style.display="block"}if(t.bookmarksTopSitesEnabled&&(m.style.display="flex",chrome.topSites.get(i=>{console.log(i),console.log(t.bookmarksTopSitesAmount);for(let{title:o,url:s}of i.slice(0,t.bookmarksTopSitesAmount))w(m,o,s,{bookmarksFavicon:t.bookmarksFavicon,isAuto:!0})})),t.customfont){if(t.customfontgoogle){let i=document.createElement("link");i.href=`https://fonts.googleapis.com/css?family=${t.customfont.replace(" ","+")}`,i.rel="stylesheet",document.head.appendChild(i)}document.body.style.fontFamily=`"${t.customfont}"`}if(t.hexbg?(n.src="",new y(document.body,{background:!0}).start()):n.src=d,t.customcss){let i=document.createElement("style");i.type="text/css",i.innerText=t.customcss,document.head.appendChild(i)}t.showSettings&&document.getElementById("settings").removeAttribute("style")});else{let d=function(o,s="block"){o.style.display=="none"?o.style.display=s:o.style.display="none"},i=function(o,s){let l=document.getElementById("install-button");l.style.display="block",l.innerText=o,l.href=s,s==="#"&&(l.onclick=()=>!1)};console.log("\u2139\uFE0F Running in demo mode");let t=new f("time",h.fmt_time);t.start();let n=new f("date",h.fmt_date);n.start();let r=document.getElementById("bookmarks");w(r,"Github","https://github.com/AlexFlipnote/homepage",{localFavicon:"images/icons/github.png"}),w(r,"Discord","https://discord.gg/yqb7vATbjH",{localFavicon:"images/icons/discord.png"}),d(document.getElementById("demo-buttons"),"flex"),document.addEventListener("DOMContentLoaded",function(){let o=document.getElementById("background"),s=Math.floor(Math.random()*h.backgroundImagesCount);o.src=`images/backgrounds/background${s}.jpg`,o.onload=()=>{o.style.opacity=1}});let m=Object.keys(_).sort();for(let o=0;o<m.length;o++){let s=document.createElement("option");s.text=m[o],s.value=m[o],document.getElementById("language").appendChild(s)}document.getElementById("timeToggle").onclick=()=>{d(document.getElementById("time"),"block")},document.getElementById("dateToggle").onclick=()=>{d(document.getElementById("date"),"block")},document.getElementById("changebg").onchange=o=>{let s=document.getElementById("background");o.target.value?s.src=o.target.value:s.src=null},document.getElementById("bookmarksToggle").onclick=function(){d(document.getElementById("bookmarks"),"flex")},document.getElementById("searchToggle").onclick=function(){d(document.getElementById("search-form"),"block")},document.getElementById("search-form").onsubmit=o=>{o.preventDefault(),alert("This would then search using the browser's default search engine")},document.getElementById("changefont").onchange=o=>{let s=o.target.value;s?document.body.style.fontFamily=`"${s}"`:document.body.style.fontFamily=""},document.getElementById("changeClock").onchange=o=>{let s=o.target.value;s?t.changeFormat(s):t.changeFormat(h.fmt_time)},document.getElementById("changeDate").onchange=o=>{let s=o.target.value;s?n.changeFormat(s):n.changeFormat(h.fmt_date)},document.getElementById("weather").onclick=()=>{d(document.getElementById("weather-container"),"flex")},document.getElementById("language").onchange=()=>{let o=document.getElementById("language").value;o||(o=navigator.language),x(o)},E?i("Add to Firefox","https://addons.mozilla.org/addon/alexflipnote-homepage/"):v&&i("Add to Chrome","https://chromewebstore.google.com/detail/alexflipnotehomepage/npagigfpfilcemncemkphndcaigegcbk")}})();
