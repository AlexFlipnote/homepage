(()=>{var N=Object.defineProperty;var _=Object.getOwnPropertySymbols;var U=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var v=(e,n,s)=>n in e?N(e,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[n]=s,B=(e,n)=>{for(var s in n||(n={}))U.call(n,s)&&v(e,s,n[s]);if(_)for(var s of _(n))G.call(n,s)&&v(e,s,n[s]);return e};var T=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),I=typeof InstallTrigger!="undefined",C=/^(?:chrome|moz)-extension:$/.test(location.protocol);var F={"01d":"2600.png","02d":"26c5.png","03d":"2601.png","04d":"1f327.png","09d":"1f327.png","10d":"1f326.png","11d":"26c8.png","13d":"1f328.png","50d":"1f32b.png","01n":"1f311.png","02n":"26c5.png","03n":"2601.png","04n":"1f327.png","09n":"1f327.png","10n":"1f326.png","11n":"26c8.png","13n":"1f328.png","50n":"1f32b.png"},M={"en-US":"English (United States)","en-GB":"English (United Kingdom)","en-CA":"English (Canada)","en-AU":"English (Australia)","en-IN":"English (India)","no-NO":"Norwegian (Norway)","sv-SE":"Swedish (Sweden)","da-DK":"Danish (Denmark)","fi-FI":"Finnish (Finland)","is-IS":"Icelandic (Iceland)","de-DE":"German (Germany)","nl-NL":"Dutch (Netherlands)","fr-FR":"French (France)","es-ES":"Spanish (Spain)","it-IT":"Italian (Italy)","pt-PT":"Portuguese (Portugal)","pt-BR":"Portuguese (Brazil)","pl-PL":"Polish (Poland)","cs-CZ":"Czech (Czech Republic)","sk-SK":"Slovak (Slovakia)","hu-HU":"Hungarian (Hungary)","ru-RU":"Russian (Russia)","uk-UA":"Ukrainian (Ukraine)","ja-JP":"Japanese (Japan)","zh-CN":"Chinese (Simplified, China)","zh-TW":"Chinese (Traditional, Taiwan)","ko-KR":"Korean (South Korea)","th-TH":"Thai (Thailand)","hi-IN":"Hindi (India)","bn-BD":"Bengali (Bangladesh)","ar-SA":"Arabic (Saudi Arabia)","he-IL":"Hebrew (Israel)","tr-TR":"Turkish (Turkey)","fa-IR":"Persian (Iran)","af-ZA":"Afrikaans (South Africa)","sw-KE":"Swahili (Kenya)","es-MX":"Spanish (Mexico)","es-AR":"Spanish (Argentina)","fr-CA":"French (Canada)","en-NZ":"English (New Zealand)","el-GR":"Greek (Greece)","ro-RO":"Romanian (Romania)","id-ID":"Indonesian (Indonesia)","ms-MY":"Malay (Malaysia)","vi-VN":"Vietnamese (Vietnam)","ta-IN":"Tamil (India)"};var A={language:"",wlanguage:"",searchbar:!1,custombg:[],show_time:!0,show_date:!0,fmt_time:"",fmt_date:"",customfont:"",customfontgoogle:!1,bookmarks:[],bookmarksFavicon:!1,bookmarksTopSitesEnabled:!1,bookmarksTopSitesAmount:5,wkey:"",temp_type:"celcius",hexbg:!1,showSettings:!0,customcss:""};var D=function(e,n){if(!window.XMLHttpRequest)return console.log("This browser does not support requests");let s=new XMLHttpRequest;s.open("GET",e,!0),s.onload=function(){if(this.status>=200&&this.status<400){let g=JSON.parse(this.response);n&&typeof n=="function"&&n(g)}},s.send(null)};function $(e,n,s,g){let a=n.coords,o=g||"en",l=document.getElementById("wtemp");D(`https://api.openweathermap.org/data/2.5/weather?lat=${a.latitude}&lon=${a.longitude}&appid=${s}&lang=${o}`,m=>{document.getElementById("wicon").src=`images/weather/${F[m.weather[0].icon]}`,document.getElementById("wname").innerText=m.name,document.getElementById("wdescription").innerText=m.weather[0].description.replace(/^\w/,u=>u.toUpperCase()),e.temp_type==="fahrenheit"?l.innerText=`${Math.round(parseInt(m.main.temp)*(9/5)-459.67)} \xB0F`:l.innerText=`${Math.round(parseInt(m.main.temp)-273.15)} \xB0C`,document.getElementById("weather-container").style.display="flex"})}var P=navigator.language||"en-US";function j(e){let n=r=>r<10?"0"+r:""+r,s=r=>r<10?"00"+r:r<100?"0"+r:""+r,g=r=>r<10?" "+r:""+r,a={monthLong:new Map,monthShort:new Map,weekdayLong:new Map,weekdayShort:new Map,dayPeriod:new Map};function o(r,c){let t=c.length==="short"?a.monthShort:a.monthLong;t.has(r)||t.set(r,new Intl.DateTimeFormat(r,{month:c.length}));let i=t.get(r);return d=>i.format(new Date(2e3,d,1))}function l(r,c){let t=c.length==="short"?a.weekdayShort:a.weekdayLong;t.has(r)||t.set(r,new Intl.DateTimeFormat(r,{weekday:c.length}));let i=t.get(r);return d=>i.format(new Date(2020,0,5+d))}function m(r){if(!a.dayPeriod.has(r)){let t=new Intl.DateTimeFormat(r,{hour:"numeric",hour12:!0});a.dayPeriod.set(r,t)}let c=a.dayPeriod.get(r);return t=>{let d=c.formatToParts(new Date(2020,0,1,t)).find(h=>h.type==="dayPeriod");return d?d.value:t<12?"AM":"PM"}}function u(r,c){switch(r){case"%Y":return t=>String(t.getFullYear());case"%y":return t=>n(t.getFullYear()%100);case"%m":return t=>n(t.getMonth()+1);case"%B":{let t=o(c||void 0,{length:"long"});return i=>t(i.getMonth())}case"%b":{let t=o(c||void 0,{length:"short"});return i=>t(i.getMonth())}case"%d":return t=>n(t.getDate());case"%e":return t=>g(t.getDate());case"%j":return t=>{let i=new Date(t.getFullYear(),0,1),d=t-i;return s(Math.floor(d/864e5)+1)};case"%A":{let t=l(c||void 0,{length:"long"});return i=>t(i.getDay())}case"%a":{let t=l(c||void 0,{length:"short"});return i=>t(i.getDay())}case"%w":return t=>String(t.getDay());case"%H":return t=>n(t.getHours());case"%I":return t=>{let i=t.getHours()%12;return n(i===0?12:i)};case"%p":{let t=m(c||void 0);return i=>t(i.getHours())}case"%M":return t=>n(t.getMinutes());case"%S":return t=>n(t.getSeconds());case"%f":return t=>String(t.getMilliseconds()).padStart(3,"0");case"%z":return t=>{let i=-t.getTimezoneOffset(),d=i>=0?"+":"-",h=Math.abs(i),R=n(Math.floor(h/60)),z=n(h%60);return d+R+z};case"%Z":return t=>{try{let d=new Intl.DateTimeFormat(c||void 0,{timeZoneName:"short"}).formatToParts(t).find(h=>h.type==="timeZoneName");return d?d.value:u("%z")(t)}catch(i){return u("%z")(t)}};case"%F":return t=>`${u("%Y")(t)}-${u("%m")(t)}-${u("%d")(t)}`;case"%T":return t=>`${u("%H")(t)}:${u("%M")(t)}:${u("%S")(t)}`;case"%%":return()=>"%";default:return()=>r}}let k=[],H=/%[A-Za-z%]/g,b=0,w;for(;(w=H.exec(e))!==null;){let r=w.index;r>b&&k.push(e.slice(b,r));let c=w[0];k.push(u(c,P)),b=r+c.length}return b<e.length&&k.push(e.slice(b)),function(c=new Date){c instanceof Date||(c=new Date(c));let t=[];for(let i=0;i<k.length;i++){let d=k[i];typeof d=="string"?t.push(d):t.push(d(c))}return t.join("")}}function x(e){P=e||navigator.language||"en-US"}function E(){function e(o){return("0"+o).slice(-2)}let n=new Date,s=e(n.getHours()),g=e(n.getMinutes()),a=e(n.getSeconds());return`${s}${g}${a}`}function f(e,n){let s=j(n);document.getElementById(e).textContent=s(new Date),requestAnimationFrame(()=>f(e,n))}function S(e,{background:n=!1,color:s=!1,text:g=!1}={}){n&&(e.style.backgroundColor=`#${E()}`),s&&(e.style.color=`#${E()}`),g&&(e.textContent=`#${E()}`),requestAnimationFrame(()=>S(e,{background:n,color:s,text:g}))}var L="2.2.16";var p={fmt_time:"%H:%M:%S",fmt_date:"%e. %B %Y",background_images_count:31};function Y(e){return chrome.runtime.getURL(`/_favicon/?pageUrl=${e}&size=32`)}function y(e,n,s,{bookmarksFavicon:g=!1,isAuto:a=!1,localFavicon:o=""}={}){let l=document.createElement("a");if(l.href=s,a&&l.setAttribute("data-auto","true"),!I&&g){let u=document.createElement("img");u.src=Y(s),u.className="bookmark-icon",l.appendChild(u)}if(o.length>0){let u=document.createElement("img");u.src=o,u.className="bookmark-icon",l.appendChild(u)}let m=document.createElement("span");m.textContent=n,l.appendChild(m),e.appendChild(l)}if(C)console.log(`\u2611\uFE0F Running in extension mode (v${L})`),document.getElementById("search-form").onsubmit=e=>{e.preventDefault(),chrome.search.query({text:document.getElementById("search-input").value})},chrome.storage.local.get(B({},A),function(e){e.show_time&&f("time",e.fmt_time||p.fmt_time),e.show_date&&f("date",e.fmt_date||p.fmt_date),x(e.language);let n=document.getElementById("background"),g=`images/backgrounds/background${Math.floor(Math.random()*p.background_images_count)}.jpg`;e.custombg.length>0&&(g=e.custombg[Math.floor(Math.random()*e.custombg.length)]),n.onload=()=>{n.style.opacity=1},e.wkey&&navigator.geolocation.getCurrentPosition(function(o){$(e,o,e.wkey,e.wlanguage)});let a=document.getElementById("bookmarks");if(e.bookmarks&&(a.style.display="flex",e.bookmarks.forEach(({name:o,url:l})=>{y(a,o,l,{bookmarksFavicon:e.bookmarksFavicon})})),e.searchbar){let o=document.getElementById("search-form");o.style.display="block"}if(e.bookmarksTopSitesEnabled&&(a.style.display="flex",chrome.topSites.get(o=>{console.log(o),console.log(e.bookmarksTopSitesAmount);for(let{title:l,url:m}of o.slice(0,e.bookmarksTopSitesAmount))y(a,l,m,{bookmarksFavicon:e.bookmarksFavicon,isAuto:!0})})),e.customfont){if(e.customfontgoogle){let o=document.createElement("link");o.href=`https://fonts.googleapis.com/css?family=${e.customfont.replace(" ","+")}`,o.rel="stylesheet",document.head.appendChild(o)}document.body.style.fontFamily=`"${e.customfont}"`}if(e.hexbg?(n.src="",S(document.body,{background:!0})):n.src=g,e.customcss){let o=document.createElement("style");o.type="text/css",o.innerText=e.customcss,document.head.appendChild(o)}e.showSettings&&document.getElementById("settings").removeAttribute("style")});else{let n=function(a,o="block"){a.style.display=="none"?a.style.display=o:a.style.display="none"},g=function(a,o){let l=document.getElementById("install-button");l.style.display="block",l.innerText=a,l.href=o,o==="#"&&(l.onclick=()=>!1)};console.log("\u2139\uFE0F Running in demo mode"),f("time",p.fmt_time),f("date",p.fmt_date);let e=document.getElementById("bookmarks");y(e,"Github","https://github.com/AlexFlipnote/homepage",{localFavicon:"images/icons/github.png"}),y(e,"Discord","https://discord.gg/yqb7vATbjH",{localFavicon:"images/icons/discord.png"}),n(document.getElementById("demo-buttons"),"flex"),document.addEventListener("DOMContentLoaded",function(){let a=document.getElementById("background"),o=Math.floor(Math.random()*p.background_images_count);a.src=`images/backgrounds/background${o}.jpg`,a.onload=()=>{a.style.opacity=1}});let s=Object.keys(M).sort();for(let a=0;a<s.length;a++){let o=document.createElement("option");o.text=s[a],o.value=s[a],document.getElementById("language").appendChild(o)}document.getElementById("timeToggle").onclick=()=>{n(document.getElementById("time"),"block")},document.getElementById("dateToggle").onclick=()=>{n(document.getElementById("date"),"block")},document.getElementById("changebg").onchange=a=>{let o=document.getElementById("background");a.target.value?o.src=a.target.value:o.src=null},document.getElementById("bookmarksToggle").onclick=function(){n(document.getElementById("bookmarks"),"flex")},document.getElementById("searchToggle").onclick=function(){n(document.getElementById("search-form"),"block")},document.getElementById("search-form").onsubmit=a=>{a.preventDefault(),alert("This would then search using the browser's default search engine")},document.getElementById("changefont").onchange=a=>{let o=a.target.value;o?document.body.style.fontFamily=`"${o}"`:document.body.style.fontFamily=""},document.getElementById("weather").onclick=function(){n(document.getElementById("weather-container"),"flex")},document.getElementById("language").onchange=function(a){let o=document.getElementById("language").value;o||(o=navigator.language),x(o)},I?g("Add to Firefox","https://addons.mozilla.org/addon/alexflipnote-homepage/"):T&&g("Add to Chrome","https://chromewebstore.google.com/detail/alexflipnotehomepage/npagigfpfilcemncemkphndcaigegcbk")}})();
