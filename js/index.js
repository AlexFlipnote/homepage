(()=>{var H=Object.defineProperty;var x=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var T=(t,o,s)=>o in t?H(t,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[o]=s,M=(t,o)=>{for(var s in o||(o={}))z.call(o,s)&&T(t,s,o[s]);if(x)for(var s of x(o))N.call(o,s)&&T(t,s,o[s]);return t};var B=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),I=typeof InstallTrigger!="undefined",C=/^(?:chrome|moz)-extension:$/.test(location.protocol);var F={"01d":"2600.png","02d":"26c5.png","03d":"2601.png","04d":"1f327.png","09d":"1f327.png","10d":"1f326.png","11d":"26c8.png","13d":"1f328.png","50d":"1f32b.png","01n":"1f311.png","02n":"26c5.png","03n":"2601.png","04n":"1f327.png","09n":"1f327.png","10n":"1f326.png","11n":"26c8.png","13n":"1f328.png","50n":"1f32b.png"},A={"en-US":"English (United States)","en-GB":"English (United Kingdom)","en-CA":"English (Canada)","en-AU":"English (Australia)","en-IN":"English (India)","no-NO":"Norwegian (Norway)","sv-SE":"Swedish (Sweden)","da-DK":"Danish (Denmark)","fi-FI":"Finnish (Finland)","is-IS":"Icelandic (Iceland)","de-DE":"German (Germany)","nl-NL":"Dutch (Netherlands)","fr-FR":"French (France)","es-ES":"Spanish (Spain)","it-IT":"Italian (Italy)","pt-PT":"Portuguese (Portugal)","pt-BR":"Portuguese (Brazil)","pl-PL":"Polish (Poland)","cs-CZ":"Czech (Czech Republic)","sk-SK":"Slovak (Slovakia)","hu-HU":"Hungarian (Hungary)","ru-RU":"Russian (Russia)","uk-UA":"Ukrainian (Ukraine)","ja-JP":"Japanese (Japan)","zh-CN":"Chinese (Simplified, China)","zh-TW":"Chinese (Traditional, Taiwan)","ko-KR":"Korean (South Korea)","th-TH":"Thai (Thailand)","hi-IN":"Hindi (India)","bn-BD":"Bengali (Bangladesh)","ar-SA":"Arabic (Saudi Arabia)","he-IL":"Hebrew (Israel)","tr-TR":"Turkish (Turkey)","fa-IR":"Persian (Iran)","af-ZA":"Afrikaans (South Africa)","sw-KE":"Swahili (Kenya)","es-MX":"Spanish (Mexico)","es-AR":"Spanish (Argentina)","fr-CA":"French (Canada)","en-NZ":"English (New Zealand)","el-GR":"Greek (Greece)","ro-RO":"Romanian (Romania)","id-ID":"Indonesian (Indonesia)","ms-MY":"Malay (Malaysia)","vi-VN":"Vietnamese (Vietnam)","ta-IN":"Tamil (India)"};var D={language:"",wlanguage:"",custombg:[],fmt_time:"",fmt_date:"",customfont:"",customfontgoogle:!1,bookmarks:[],bookmarksFavicon:!1,bookmarksTopSitesEnabled:!1,bookmarksTopSitesAmount:5,wkey:"",temp_type:"celcius",hexbg:!1,showSettings:!0,customcss:""};var v=function(t,o){if(!window.XMLHttpRequest)return console.log("This browser does not support requests");let s=new XMLHttpRequest;s.open("GET",t,!0),s.onload=function(){if(this.status>=200&&this.status<400){let d=JSON.parse(this.response);o&&typeof o=="function"&&o(d)}},s.send(null)};function P(t,o,s,d){let a=o.coords,n=d||"en",u=document.getElementById("wtemp");v(`https://api.openweathermap.org/data/2.5/weather?lat=${a.latitude}&lon=${a.longitude}&appid=${s}&lang=${n}`,m=>{document.getElementById("wicon").src=`images/weather/${F[m.weather[0].icon]}`,document.getElementById("wname").innerText=m.name,document.getElementById("wdescription").innerText=m.weather[0].description.replace(/^\w/,l=>l.toUpperCase()),t.temp_type==="fahrenheit"?u.innerText=`${Math.round(parseInt(m.main.temp)*(9/5)-459.67)} \xB0F`:u.innerText=`${Math.round(parseInt(m.main.temp)-273.15)} \xB0C`,document.getElementById("weather-container").style.display="flex"})}var L=navigator.language||"en-US";function U(t){let o=r=>r<10?"0"+r:""+r,s=r=>r<10?"00"+r:r<100?"0"+r:""+r,d=r=>r<10?" "+r:""+r,a={monthLong:new Map,monthShort:new Map,weekdayLong:new Map,weekdayShort:new Map,dayPeriod:new Map};function n(r,c){let e=c.length==="short"?a.monthShort:a.monthLong;e.has(r)||e.set(r,new Intl.DateTimeFormat(r,{month:c.length}));let i=e.get(r);return g=>i.format(new Date(2e3,g,1))}function u(r,c){let e=c.length==="short"?a.weekdayShort:a.weekdayLong;e.has(r)||e.set(r,new Intl.DateTimeFormat(r,{weekday:c.length}));let i=e.get(r);return g=>i.format(new Date(2020,0,5+g))}function m(r){if(!a.dayPeriod.has(r)){let e=new Intl.DateTimeFormat(r,{hour:"numeric",hour12:!0});a.dayPeriod.set(r,e)}let c=a.dayPeriod.get(r);return e=>{let g=c.formatToParts(new Date(2020,0,1,e)).find(h=>h.type==="dayPeriod");return g?g.value:e<12?"AM":"PM"}}function l(r,c){switch(r){case"%Y":return e=>String(e.getFullYear());case"%y":return e=>o(e.getFullYear()%100);case"%m":return e=>o(e.getMonth()+1);case"%B":{let e=n(c||void 0,{length:"long"});return i=>e(i.getMonth())}case"%b":{let e=n(c||void 0,{length:"short"});return i=>e(i.getMonth())}case"%d":return e=>o(e.getDate());case"%e":return e=>d(e.getDate());case"%j":return e=>{let i=new Date(e.getFullYear(),0,1),g=e-i;return s(Math.floor(g/864e5)+1)};case"%A":{let e=u(c||void 0,{length:"long"});return i=>e(i.getDay())}case"%a":{let e=u(c||void 0,{length:"short"});return i=>e(i.getDay())}case"%w":return e=>String(e.getDay());case"%H":return e=>o(e.getHours());case"%I":return e=>{let i=e.getHours()%12;return o(i===0?12:i)};case"%p":{let e=m(c||void 0);return i=>e(i.getHours())}case"%M":return e=>o(e.getMinutes());case"%S":return e=>o(e.getSeconds());case"%f":return e=>String(e.getMilliseconds()).padStart(3,"0");case"%z":return e=>{let i=-e.getTimezoneOffset(),g=i>=0?"+":"-",h=Math.abs(i),$=o(Math.floor(h/60)),_=o(h%60);return g+$+_};case"%Z":return e=>{try{let g=new Intl.DateTimeFormat(c||void 0,{timeZoneName:"short"}).formatToParts(e).find(h=>h.type==="timeZoneName");return g?g.value:l("%z")(e)}catch(i){return l("%z")(e)}};case"%F":return e=>`${l("%Y")(e)}-${l("%m")(e)}-${l("%d")(e)}`;case"%T":return e=>`${l("%H")(e)}:${l("%M")(e)}:${l("%S")(e)}`;case"%%":return()=>"%";default:return()=>r}}let p=[],R=/%[A-Za-z%]/g,k=0,w;for(;(w=R.exec(t))!==null;){let r=w.index;r>k&&p.push(t.slice(k,r));let c=w[0];p.push(l(c,L)),k=r+c.length}return k<t.length&&p.push(t.slice(k)),function(c=new Date){c instanceof Date||(c=new Date(c));let e=[];for(let i=0;i<p.length;i++){let g=p[i];typeof g=="string"?e.push(g):e.push(g(c))}return e.join("")}}function S(t){L=t||navigator.language||"en-US"}function f(t,o){let s=U(o);document.getElementById(t).textContent=s(new Date),requestAnimationFrame(()=>f(t,o))}function E(){function t(s){return("0"+s).slice(-2)}function o(){let s=new Date,d=t(s.getHours()),a=t(s.getMinutes()),n=t(s.getSeconds());return`${d}${a}${n}`}document.body.style.backgroundColor=`#${o()}`,setTimeout(E,50)}var b={fmt_time:"%H:%M:%S",fmt_date:"%e. %B %Y"};function G(t){return chrome.runtime.getURL(`/_favicon/?pageUrl=${t}&size=32`)}function y(t,o,s,{bookmarksFavicon:d=!1,isAuto:a=!1,localFavicon:n=""}={}){let u=document.createElement("a");if(u.href=s,a&&u.setAttribute("data-auto","true"),!I&&d){let l=document.createElement("img");l.src=G(s),l.className="bookmark-icon",u.appendChild(l)}if(n.length>0){let l=document.createElement("img");l.src=n,l.className="bookmark-icon",u.appendChild(l)}let m=document.createElement("span");m.textContent=o,u.appendChild(m),t.appendChild(u)}if(C)console.log("\u2611\uFE0F Running in extension mode"),chrome.storage.local.get(M({},D),function(t){f("time",t.fmt_time||b.fmt_time),f("date",t.fmt_date||b.fmt_date),S(t.language);let o=document.getElementById("background"),d=`images/backgrounds/background${Math.floor(Math.random()*31)}.jpg`;t.custombg.length>0&&(d=t.custombg[Math.floor(Math.random()*t.custombg.length)]),o.onload=()=>{o.style.opacity=1},t.wkey&&navigator.geolocation.getCurrentPosition(function(n){P(t,n,t.wkey,t.wlanguage)});let a=document.getElementById("bookmarks");if(t.bookmarks&&(a.style.display="flex",t.bookmarks.forEach(({name:n,url:u})=>{y(a,n,u,{bookmarksFavicon:t.bookmarksFavicon})})),t.bookmarksTopSitesEnabled&&(a.style.display="flex",chrome.topSites.get(n=>{console.log(n),console.log(t.bookmarksTopSitesAmount);for(let{title:u,url:m}of n.slice(0,t.bookmarksTopSitesAmount))y(a,u,m,{bookmarksFavicon:t.bookmarksFavicon,isAuto:!0})})),t.customfont){if(t.customfontgoogle){let n=document.createElement("link");n.href=`https://fonts.googleapis.com/css?family=${t.customfont.replace(" ","+")}`,n.rel="stylesheet",document.head.appendChild(n)}document.body.style.fontFamily=`"${t.customfont}"`}if(t.hexbg?(o.src="",E()):o.src=d,t.customcss){let n=document.createElement("style");n.type="text/css",n.innerText=t.customcss,document.head.appendChild(n)}t.showSettings&&document.getElementById("settings").removeAttribute("style")});else{let o=function(a,n="block"){a.style.display=="none"?a.style.display=n:a.style.display="none"},d=function(a,n){let u=document.getElementById("install-button");u.style.display="block",u.innerText=a,u.href=n,n==="#"&&(u.onclick=()=>!1)};console.log("\u2139\uFE0F Running in demo mode"),f("time",b.fmt_time),f("date",b.fmt_date);let t=document.getElementById("bookmarks");y(t,"Github","https://github.com/AlexFlipnote/homepage",{localFavicon:"images/icons/github.png"}),y(t,"Discord","https://discord.gg/yqb7vATbjH",{localFavicon:"images/icons/discord.png"}),o(document.getElementById("demo-buttons")),document.addEventListener("DOMContentLoaded",function(){let a=document.getElementById("background"),n=Math.floor(Math.random()*31);a.src=`images/backgrounds/background${n}.jpg`,a.onload=()=>{a.style.opacity=1}});let s=Object.keys(A).sort();for(let a=0;a<s.length;a++){let n=document.createElement("option");n.text=s[a],n.value=s[a],document.getElementById("language").appendChild(n)}document.getElementById("changebg").onclick=function(){let a=prompt("Please enter a font","Times New Roman");a&&(document.body.style.fontFamily=`"${a}", "Lato", sans-serif, Arial`)},document.getElementById("bookmarksToggle").onclick=function(){o(document.getElementById("bookmarks"),"flex")},document.getElementById("changefont").onclick=function(){let a=document.getElementById("background"),n=prompt("Please enter a background URL:","https://");n&&(a.src=n)},document.getElementById("weather").onclick=function(){o(document.getElementById("weather-container"),"flex")},document.getElementById("language").onchange=function(a){let n=document.getElementById("language").value;n||(n=navigator.language),S(n)},I?d("Add to Firefox","https://addons.mozilla.org/addon/alexflipnote-homepage/"):B&&d("Add to Chrome","https://chromewebstore.google.com/detail/alexflipnotehomepage/npagigfpfilcemncemkphndcaigegcbk")}})();
