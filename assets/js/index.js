(()=>{var S=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),k=typeof InstallTrigger!="undefined",x=/^(?:chrome|moz)-extension:$/.test(location.protocol);var E={"01d":"2600.png","02d":"26c5.png","03d":"2601.png","04d":"1f327.png","09d":"1f327.png","10d":"1f326.png","11d":"26c8.png","13d":"1f328.png","50d":"1f32b.png","01n":"1f311.png","02n":"26c5.png","03n":"2601.png","04n":"1f327.png","09n":"1f327.png","10n":"1f326.png","11n":"26c8.png","13n":"1f328.png","50n":"1f32b.png"},M={"en-US":"English (United States)","en-GB":"English (United Kingdom)","en-CA":"English (Canada)","en-AU":"English (Australia)","en-IN":"English (India)","no-NO":"Norwegian (Norway)","sv-SE":"Swedish (Sweden)","da-DK":"Danish (Denmark)","fi-FI":"Finnish (Finland)","is-IS":"Icelandic (Iceland)","de-DE":"German (Germany)","nl-NL":"Dutch (Netherlands)","fr-FR":"French (France)","es-ES":"Spanish (Spain)","it-IT":"Italian (Italy)","pt-PT":"Portuguese (Portugal)","pt-BR":"Portuguese (Brazil)","pl-PL":"Polish (Poland)","cs-CZ":"Czech (Czech Republic)","sk-SK":"Slovak (Slovakia)","hu-HU":"Hungarian (Hungary)","ru-RU":"Russian (Russia)","uk-UA":"Ukrainian (Ukraine)","ja-JP":"Japanese (Japan)","zh-CN":"Chinese (Simplified, China)","zh-TW":"Chinese (Traditional, Taiwan)","ko-KR":"Korean (South Korea)","th-TH":"Thai (Thailand)","hi-IN":"Hindi (India)","bn-BD":"Bengali (Bangladesh)","ar-SA":"Arabic (Saudi Arabia)","he-IL":"Hebrew (Israel)","tr-TR":"Turkish (Turkey)","fa-IR":"Persian (Iran)","af-ZA":"Afrikaans (South Africa)","sw-KE":"Swahili (Kenya)","es-MX":"Spanish (Mexico)","es-AR":"Spanish (Argentina)","fr-CA":"French (Canada)","en-NZ":"English (New Zealand)","el-GR":"Greek (Greece)","ro-RO":"Romanian (Romania)","id-ID":"Indonesian (Indonesia)","ms-MY":"Malay (Malaysia)","vi-VN":"Vietnamese (Vietnam)","ta-IN":"Tamil (India)"};var B=function(t,r){if(!window.XMLHttpRequest)return console.log("This browser does not support requests");let c=new XMLHttpRequest;c.open("GET",t,!0),c.onload=function(){if(this.status>=200&&this.status<400){let a=JSON.parse(this.response);r&&typeof r=="function"&&r(a)}},c.send(null)};function T(t,r,c,a){let n=r.coords,g=a||"en",f=document.getElementById("wtemp");B(`https://api.openweathermap.org/data/2.5/weather?lat=${n.latitude}&lon=${n.longitude}&appid=${c}&lang=${g}`,l=>{document.getElementById("wicon").src=`assets/images/weather/${E[l.weather[0].icon]}`,document.getElementById("wname").innerText=l.name,document.getElementById("wdescription").innerText=l.weather[0].description.replace(/^\w/,d=>d.toUpperCase()),t.temp_type==="fahrenheit"?f.innerText=`${Math.round(parseInt(l.main.temp)*(9/5)-459.67)} \xB0F`:f.innerText=`${Math.round(parseInt(l.main.temp)-273.15)} \xB0C`,document.getElementById("wcontainer").style.display="block"})}var C=navigator.language||"en-US";function P(t){let r=o=>o<10?"0"+o:""+o,c=o=>o<10?"00"+o:o<100?"0"+o:""+o,a=o=>o<10?" "+o:""+o,n={monthLong:new Map,monthShort:new Map,weekdayLong:new Map,weekdayShort:new Map,dayPeriod:new Map};function g(o,i){let e=i.length==="short"?n.monthShort:n.monthLong;e.has(o)||e.set(o,new Intl.DateTimeFormat(o,{month:i.length}));let s=e.get(o);return u=>s.format(new Date(2e3,u,1))}function f(o,i){let e=i.length==="short"?n.weekdayShort:n.weekdayLong;e.has(o)||e.set(o,new Intl.DateTimeFormat(o,{weekday:i.length}));let s=e.get(o);return u=>s.format(new Date(2020,0,5+u))}function l(o){if(!n.dayPeriod.has(o)){let e=new Intl.DateTimeFormat(o,{hour:"numeric",hour12:!0});n.dayPeriod.set(o,e)}let i=n.dayPeriod.get(o);return e=>{let u=i.formatToParts(new Date(2020,0,1,e)).find(m=>m.type==="dayPeriod");return u?u.value:e<12?"AM":"PM"}}function d(o,i){switch(o){case"%Y":return e=>String(e.getFullYear());case"%y":return e=>r(e.getFullYear()%100);case"%m":return e=>r(e.getMonth()+1);case"%B":{let e=g(i||void 0,{length:"long"});return s=>e(s.getMonth())}case"%b":{let e=g(i||void 0,{length:"short"});return s=>e(s.getMonth())}case"%d":return e=>r(e.getDate());case"%e":return e=>a(e.getDate());case"%j":return e=>{let s=new Date(e.getFullYear(),0,1),u=e-s;return c(Math.floor(u/864e5)+1)};case"%A":{let e=f(i||void 0,{length:"long"});return s=>e(s.getDay())}case"%a":{let e=f(i||void 0,{length:"short"});return s=>e(s.getDay())}case"%w":return e=>String(e.getDay());case"%H":return e=>r(e.getHours());case"%I":return e=>{let s=e.getHours()%12;return r(s===0?12:s)};case"%p":{let e=l(i||void 0);return s=>e(s.getHours())}case"%M":return e=>r(e.getMinutes());case"%S":return e=>r(e.getSeconds());case"%f":return e=>String(e.getMilliseconds()).padStart(3,"0");case"%z":return e=>{let s=-e.getTimezoneOffset(),u=s>=0?"+":"-",m=Math.abs(s),A=r(Math.floor(m/60)),F=r(m%60);return u+A+F};case"%Z":return e=>{try{let u=new Intl.DateTimeFormat(i||void 0,{timeZoneName:"short"}).formatToParts(e).find(m=>m.type==="timeZoneName");return u?u.value:d("%z")(e)}catch(s){return d("%z")(e)}};case"%F":return e=>`${d("%Y")(e)}-${d("%m")(e)}-${d("%d")(e)}`;case"%T":return e=>`${d("%H")(e)}:${d("%M")(e)}:${d("%S")(e)}`;case"%%":return()=>"%";default:return()=>o}}let p=[],D=/%[A-Za-z%]/g,w=0,y;for(;(y=D.exec(t))!==null;){let o=y.index;o>w&&p.push(t.slice(w,o));let i=y[0];p.push(d(i,C)),w=o+i.length}return w<t.length&&p.push(t.slice(w)),function(i=new Date){i instanceof Date||(i=new Date(i));let e=[];for(let s=0;s<p.length;s++){let u=p[s];typeof u=="string"?e.push(u):e.push(u(i))}return e.join("")}}function I(t){C=t||navigator.language||"en-US"}function h(t,r){let c=P(r);document.getElementById(t).textContent=c(new Date),requestAnimationFrame(()=>h(t,r))}function b(){function t(c){return("0"+c).slice(-2)}function r(){let c=new Date,a=t(c.getHours()),n=t(c.getMinutes()),g=t(c.getSeconds());return a.toString()+n.toString()+g.toString()}document.body.style.backgroundColor="#"+r("hex"),setTimeout(b,50)}if(x)console.log("\u2611\uFE0F Running in extension mode"),chrome.storage.local.get({language:"",wlanguage:"",custombg:[],fmt_time:"",fmt_date:"",customfont:"",customfontgoogle:!1,wkey:"",temp_type:"celcius",hexbg:!1,showSettings:!0,customcss:""},function(t){h("js-time",t.fmt_time||"%H:%M:%S"),h("js-date",t.fmt_date||"%d. %B %Y"),I(t.language);let r=document.getElementById("js-bg"),a=`assets/images/backgrounds/background${Math.floor(Math.random()*31)}.jpg`;if(t.custombg.length>0&&(a=t.custombg[Math.floor(Math.random()*t.custombg.length)]),r.onload=()=>{r.style.opacity=1},t.wkey&&navigator.geolocation.getCurrentPosition(function(n){T(t,n,t.wkey,t.wlanguage)}),t.customfont){if(t.customfontgoogle){let n=document.createElement("link");n.href="https://fonts.googleapis.com/css?family="+t.customfont.replace(" ","+"),n.rel="stylesheet",document.head.appendChild(n)}document.body.style.fontFamily=`"${t.customfont}", "Lato", sans-serif, Arial`}if(t.hexbg?(r.src="",b()):r.src=a,t.customcss){let n=document.createElement("style");n.type="text/css",n.innerText=t.customcss,document.head.appendChild(n)}t.showSettings&&document.getElementById("settings").removeAttribute("style")});else{let t=function(a){a.style.display=="none"?a.style.display="block":a.style.display="none"},c=function(a,n){let g=document.getElementById("install-button");g.style.display="block",g.innerText=a,g.href=n,n==="#"&&(g.onclick=()=>!1)};console.log("\u2139\uFE0F Running in demo mode"),h("js-time","%H:%M:%S"),h("js-date","%d. %B %Y"),t(document.getElementById("demoButtons")),document.addEventListener("DOMContentLoaded",function(){let a=document.getElementById("js-bg"),n=Math.floor(Math.random()*31);a.src=`assets/images/backgrounds/background${n}.jpg`,a.onload=()=>{a.style.opacity=1}});let r=Object.keys(M).sort();for(let a=0;a<r.length;a++){let n=document.createElement("option");n.text=r[a],n.value=r[a],document.getElementById("language").appendChild(n)}document.getElementById("changebg").onclick=function(){let a=prompt("Please enter a font","Times New Roman");a&&(document.body.style.fontFamily=`"${a}", "Lato", sans-serif, Arial`)},document.getElementById("changefont").onclick=function(){let a=document.getElementById("js-bg"),n=prompt("Please enter a background URL:","https://");n&&(a.src=n)},document.getElementById("weather").onclick=function(){t(document.getElementById("wcontainer"))},document.getElementById("language").onchange=function(a){let n=document.getElementById("language").value;n||(n=navigator.language),I(n)},k?c("Add to Firefox","https://addons.mozilla.org/addon/alexflipnote-homepage/"):S&&c("Add to Chrome (Awaiting approval)","#")}})();
